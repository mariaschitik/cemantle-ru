<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Семантическая игра</title>
</head>
<body>
  <h1>Угадай слово</h1>
  <input type="text" id="userInput" placeholder="Введите слово" />
  <button onclick="check()">Проверить</button>
  <p id="result"></p>

  <script>
    let vectors;
    const secretWord = "солнце";

    fetch('fasttext_subset_10k.json')
      .then(response => response.json())
      .then(data => {
        vectors = data;
      });

    function cosineSimilarity(vec1, vec2) {
      let dot = 0, normA = 0, normB = 0;
      for (let i = 0; i < vec1.length; i++) {
        dot += vec1[i] * vec2[i];
        normA += vec1[i] ** 2;
        normB += vec2[i] ** 2;
      }
      return dot / (Math.sqrt(normA) * Math.sqrt(normB));
    }

    function check() {
      const input = document.getElementById("userInput").value.trim().toLowerCase();
      const result = document.getElementById("result");

      if (!vectors) {
        result.textContent = "Векторы ещё загружаются...";
        return;
      }

      if (!(input in vectors)) {
        result.textContent = "Слово не найдено в словаре.";
        return;
      }

      if (!(secretWord in vectors)) {
        result.textContent = "Загаданное слово отсутствует в словаре.";
        return;
      }

      const similarity = cosineSimilarity(vectors[input], vectors[secretWord]);
      result.textContent = `Сходство с загаданным словом: ${similarity.toFixed(4)}`;
    }
  </script>
</body>
</html>
