<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Игра на fasttext</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  #history { 
    margin-top: 20px; 
    border: 1px solid #ccc; 
    padding: 10px; 
    height: 200px; 
    overflow-y: auto; 
    white-space: pre-wrap;
    background: #f9f9f9;
  }
</style>
</head>
<body>

<h2>Угадай слово</h2>

<input type="text" id="inputWord" placeholder="Введите слово" />
<button id="checkBtn">Проверить</button>

<p id="result"></p>

<div id="history"></div>

<script>
// Пример словаря с векторами (в реале загружай из json)
const vectors = {
  "стол": [0.1, 0.2, 0.3],
  "игра": [0.4, 0.2, 0.1],
  "компьютер": [0.5, 0.5, 0.5]
};

// Загаданное слово и его вектор (пример)
const secretWord = "стол";
const secretVector = vectors[secretWord];

function cosineSimilarity(vecA, vecB) {
  let dot = 0, normA = 0, normB = 0;
  for(let i=0; i < vecA.length; i++){
    dot += vecA[i]*vecB[i];
    normA += vecA[i]*vecA[i];
    normB += vecB[i]*vecB[i];
  }
  return dot / (Math.sqrt(normA) * Math.sqrt(normB));
}

function addHistory(word, similarity) {
  const history = document.getElementById("history");
  history.textContent += `${word} .......... ${similarity.toFixed(2)}\n`;
  history.scrollTop = history.scrollHeight; // прокрутка вниз
}

function checkWord() {
  const input = document.getElementById("inputWord");
  const word = input.value.trim().toLowerCase();

  const result = document.getElementById("result");

  if(!vectors[word]){
    result.textContent = "Слова нет в словаре";
    return;
  }

  const sim = cosineSimilarity(secretVector, vectors[word]);
  result.textContent = `Косинусное сходство: ${sim.toFixed(2)}`;

  addHistory(word, sim);
  input.value = "";
}

// Кнопка "Проверить"
document.getElementById("checkBtn").addEventListener("click", checkWord);

// Отправка по Enter
document.getElementById("inputWord").addEventListener("keydown", function(e){
  if(e.key === "Enter") {
    checkWord();
  }
});
</script>

</body>
</html>
